#include <LedControl.h>// thêm thư viện
LedControl matrix = LedControl(2, 4, 3,1);
const int numbyte = 136; // Số dãy Byte (1 chữ gồm 8 dãy byte = 64 bit)

void setup()
{
  matrix.shutdown(0, false);      //Bật hiển thị
  matrix.setIntensity(0, 15);     //Đặt độ sáng lớn nhất
}

//Mảng chứa dữ liệu chữ
byte a[numbyte] =
{
  0x66, 0x66, 0x66, 0x7e, 0x66, 0x66, 0x3c, 0x00, //H
  0x00, 0x00, 0x3e, 0x2a, 0x2a,0x2a, 0x00,  0x00,//e
  0x00, 0x00, 0x3e, 0x02, 0x02, 0x02, 0x00, 0x00, //l
  0x00, 0x00, 0x3e, 0x02, 0x02, 0x02, 0x00, 0x00, //l
  0x00, 0x00, 0x3e, 0x22, 0x22, 0x3e, 0x00, 0x00,//o
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //null
  0x00, 0x00, 0x3c, 0x02, 0x04, 0x02, 0x3c, 0x00, //w
  0x00, 0x00, 0x3e, 0x22, 0x22, 0x3e, 0x00, 0x00,//o
  0x00, 0x00,0x3e,0x28,0x2c,0x12,0x00,0x00,//r
  0x00, 0x00, 0x3e, 0x02, 0x02, 0x02, 0x00, 0x00, //l
  0x00, 0x00, 0x3e, 0x22, 0x22, 0x1c, 0x00, 0x00, //d
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //null
  0x00, 0x00, 0x20, 0x20, 0x3e, 0x20, 0x20, 0x00, //t
  0x00, 0x00, 0x3e, 0x2a, 0x2a, 0x2a, 0x00, 0x00,//e
  0x00, 0x00, 0x1e, 0x28, 0x28, 0x28, 0x1e, 0x00,//a
  0x00, 0x00, 0x3e, 0x10, 0x08, 0x10, 0x3e, 0x00,//m
  0x00, 0x00, 0x3e, 0x49, 0x49, 0x26, 0x00, 0x00,//6
};

void flash()                //Thay đổi từng chữ
{
  matrix.clearDisplay(0);   //Xóa sạch màn hình

  //Set từng chữ
  for (int i = 0 ; i + 8 <= numbyte; i += 8)  
  {
    for (int j = 0; j < 8; j++)
    {
      matrix.setRow(0, j, a[i + j]);
    }
    delay(500);           //Chờ 0,5s
  }
}

void scroll()             //Chạy chữ
{
  matrix.clearDisplay(0);
  
  //Set từng hàng
  for (int i = 0 ; i + 8 <= numbyte; i++)
  {
    for (int j = 0 ; j < 8; j++)
    {
      matrix.setRow(0, j, a[i + j]);
    } 
    delay(100); // Chờ 100s
  }
}

void loop()
{
  flash();      //Chạy hàm flash()
  scroll();     //Chạy hàm scroll()
}
